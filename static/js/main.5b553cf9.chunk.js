(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports={url_container:"ConnectionBox_url_container__ZiqWH",url_input:"ConnectionBox_url_input__3FnLF",url_btn:"ConnectionBox_url_btn__1a2zb",msg_container:"ConnectionBox_msg_container__1U6Fe",msg_input:"ConnectionBox_msg_input__38q8i",msg_btn:"ConnectionBox_msg_btn__3H_l-"}},36:function(e,t,n){e.exports=n(57)},47:function(e,t,n){e.exports={header_text:"Header_header_text__H1KH5"}},54:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(28),r=n.n(o),l=n(68),s=n(8),u=Object(a.createContext)(),i=function(e){var t=Object(a.useState)(0),n=Object(s.a)(t,2),o=n[0],r=n[1],l=Object(a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r(function(t){return t+e})});return c.a.createElement(u.Provider,{value:{counter:o,addToCounter:l}},e.children)},m=function(){return Object(a.useContext)(u)},b=Object(a.createContext)(),f=function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],r=n[1],l=Object(a.useCallback)(function(e){e&&r(e)});return c.a.createElement(b.Provider,{value:{lastMessage:o,changeLastMessage:l}},e.children)},g=function(){return Object(a.useContext)(b)},d=JSON.stringify({event:"bts:subscribe",data:{channel:"order_book_btcusd"}}),_=Object(a.createContext)(),p=function(e){var t=Object(a.useState)("off"),n=Object(s.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),i=u[0],m=u[1],b=Object(a.useState)(null),f=Object(s.a)(b,2),g=f[0],d=f[1],p=Object(a.useCallback)(function(e){e&&m(e)}),x=Object(a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";d(e)}),h=Object(a.useCallback)(function(e){switch(e){case"on":r("on");break;case"off":r("off");break;case"connecting":r("connecting");break;case"closing":r("closing")}});return c.a.createElement(_.Provider,{value:{connectionStatus:o,url:i,wsMsg:g,changeUrl:p,setSendMessage:x,changeWsStatus:h}},e.children)},x=function(){return Object(a.useContext)(_)},h=function(e){var t=e.children;return c.a.createElement(i,null,c.a.createElement(f,null,c.a.createElement(p,null,t)))},E=n(56),C=n(71),j=Object(E.a)({palette:{primary:{main:"#e0e0e0",dark:"#333",border:"#c0c0c0",textDark:"#333",textLight:"#f0f0f0"}}}),O=function(e){return c.a.createElement(C.a,{theme:j},e.children)},k=function(e){var t=x(),n=t.connectionStatus,o=t.changeWsStatus,r=t.url,l=t.wsMsg,u=t.setSendMessage,i=g().changeLastMessage,b=m().addToCounter,f=Object(a.useState)(null),d=Object(s.a)(f,2),_=d[0],p=d[1];Object(a.useEffect)(function(){switch(n){case"connecting":h();break;case"closing":E()}},[n]),Object(a.useEffect)(function(){console.log(" -- -- WebSocketComponent",n,l),"on"===n&&"string"===typeof l&&_.send(l)},[l]);var h=Object(a.useCallback)(function(){var e=new WebSocket(r);p(e),e.onerror=function(e){console.log("socket error",e),E()},e.onopen=function(){console.log("socket has opened"),o("on")},e.onmessage=function(e){var t=e.data;console.log("socket onmessage",t),i(t),b()}}),E=Object(a.useCallback)(function(){_&&(console.log("socket is closing"),_.close(),o("off"),p(null),u(),console.log("socket has closed"))});return c.a.createElement(c.a.Fragment,null,e.children)},v=n(11),S=n.n(v),w=function(){var e=x(),t=e.connectionStatus,n=e.changeWsStatus,a=e.changeUrl,o=e.setSendMessage,r="wss://ws.bitstamp.net",s=d;return c.a.createElement(l.a,{width:"100%",sx:{display:"flex",flexDirection:"column",bgcolor:"primary.main"}},c.a.createElement("div",{className:S.a.url_container},c.a.createElement("input",{className:S.a.url_input,defaultValue:"wss://ws.bitstamp.net",type:"text",onChange:function(e){return r=e.target.value}}),c.a.createElement("button",{className:S.a.url_btn,onClick:function(){"off"===t?(a(r),n("connecting")):"on"===t&&n("closing")},disabled:"on"!==t&&"off"!==t},"on"===t?"Stop socket":"off"===t?"Open socket":"pending")),c.a.createElement("div",{className:S.a.msg_container},c.a.createElement("label",null,"WS status: ",t),c.a.createElement("textarea",{className:S.a.msg_input,type:"textarea",defaultValue:d,onChange:function(e){return s=e.target.value}}),c.a.createElement("button",{className:S.a.msg_btn,onClick:function(){o(s)},disabled:"on"!==t},"Send message")))},y=function(){var e=g().lastMessage,t=m().counter;return c.a.createElement(l.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"primary.main",minHeight:"300px"}},c.a.createElement("label",{className:S.a.counter},"Message Counter: ",t),c.a.createElement("label",null,"Last Message:",c.a.createElement("br",null),e))},M=n(47),N=n.n(M),W=function(){return c.a.createElement(l.a,{width:"100%",sx:{height:"50px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",bgcolor:"primary.dark"}},c.a.createElement("h1",{className:N.a.header_text},"WS message counter"))};var B=function(){return c.a.createElement(h,null,c.a.createElement(O,null,c.a.createElement(k,null),c.a.createElement(l.a,{maxWidth:"md",sx:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",bgcolor:"primary.main",border:1,borderColor:"primary.border",padding:"0!important"}},c.a.createElement(W,null),c.a.createElement(w,null),c.a.createElement(y,null))))},F=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,67)).then(function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)})};n(54);r.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(B,null))),F()}},[[36,3,2]]]);
//# sourceMappingURL=main.5b553cf9.chunk.js.map